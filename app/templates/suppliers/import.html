{% extends "base.html" %}

{% block title %}Lieferanten importieren{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="title">Lieferanten importieren</h1>
    
    <div class="alert alert-warning">
        <strong>Backup-Erinnerung:</strong> Erstellen Sie vor dem Import bitte ein Backup Ihrer Datenbank (z.B. Assed_Managemend_Backup_{{ now.strftime('%Y-%m-%d') }}.zip), um Datenverluste zu vermeiden.
    </div>
    
    <div class="box">
        <h2 class="subtitle">CSV-Datei hochladen</h2>
        
        <form method="post" enctype="multipart/form-data">
            <div class="field">
                <label class="label">CSV-Datei</label>
                <div class="control">
                    <input class="input" type="file" name="csv_file" accept=".csv">
                </div>
                <p class="help">Bitte wählen Sie eine CSV-Datei aus.</p>
            </div>
            
            <div class="field">
                <label class="label">Trennzeichen</label>
                <div class="control">
                    <div class="select">
                        <select name="delimiter">
                            <option value=",">Komma (,)</option>
                            <option value=";" selected>Semikolon (;)</option>
                            <option value="\t">Tab</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="field">
                <div class="control">
                    <button type="submit" class="button is-primary">Importieren</button>
                    <a href="{{ url_for('suppliers.supplier_list') }}" class="button is-light">Abbrechen</a>
                </div>
            </div>
        </form>
    </div>
    
    <div class="box">
        <h2 class="subtitle">CSV-Format</h2>
        <p>Die CSV-Datei sollte folgende Spalten enthalten:</p>
        
        <table class="table is-striped is-fullwidth">
            <thead>
                <tr>
                    <th>Spaltenname</th>
                    <th>Beschreibung</th>
                    <th>Pflichtfeld</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Name</td>
                    <td>Name des Lieferanten</td>
                    <td class="has-text-centered has-text-success">Ja</td>
                </tr>
                <tr>
                    <td>Adresse</td>
                    <td>Vollständige Adresse des Lieferanten</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Telefon</td>
                    <td>Telefonnummer</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Email</td>
                    <td>E-Mail-Adresse</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Website</td>
                    <td>Webseite des Lieferanten</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Kundennummer</td>
                    <td>Ihre Kundennummer beim Lieferanten</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Kreditornummer</td>
                    <td>Kreditornummer für Buchhaltung</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Beschreibung</td>
                    <td>Allgemeine Beschreibung</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
                <tr>
                    <td>Kontaktinfo</td>
                    <td>Detaillierte Kontaktinformationen, Ansprechpartner etc.</td>
                    <td class="has-text-centered">Nein</td>
                </tr>
            </tbody>
        </table>
        
        <div class="notification is-info">
            <p><strong>Hinweise:</strong></p>
            <ul>
                <li>Die Spaltennamen sind nicht case-sensitive. Die Reihenfolge der Spalten spielt keine Rolle.</li>
                <li>Bei bereits existierenden Lieferanten (gleicher Name) werden die Daten aktualisiert.</li>
            </ul>
            
            <p class="mt-3"><strong>Beispiel für eine gültige CSV-Datei:</strong></p>
            <pre>Name;Adresse;Telefon;Email;Website;Kundennummer;Kreditornummer;Beschreibung;Kontaktinfo
ABC Technik AG;Industriestraße 42, 12345 Berlin;+49 30 123456;kontakt@abc-technik.de;www.abc-technik.de;K-10042;KR9001;Hardware-Lieferant;Hr. Schmidt, Tel. Durchwahl -201
Büromarkt Schmidt;Hauptstr. 11, 80331 München;089 987654;info@bueromarkt-schmidt.de;www.bueromarkt-schmidt.de;10042;KR9002;Bürobedarf und Möbel;Fr. Müller, Vertrieb</pre>
        </div>
    </div>
    
    <div class="box">
        <h2 class="subtitle">CSV-Tipps</h2>
        <ul>
            <li>Verwenden Sie UTF-8 Kodierung für Ihre CSV-Datei, um Probleme mit Umlauten zu vermeiden</li>
            <li>Exportieren Sie Daten aus Excel als CSV (Trennzeichen-getrennt)</li>
            <li>Text mit Trennzeichen sollte in Anführungszeichen gesetzt werden</li>
            <li>Erstellen Sie vor dem Import ein Datenbank-Backup</li>
        </ul>
    </div>
</div>
{% endblock %}
